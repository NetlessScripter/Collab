local Debris = game:GetService("Debris")

local function SFX(path, vol, parent, tpos)
	local name = path:match("([^/]+)%?") or path:match("([^/]+)$")
	local file = name .. ".mp3"

	if not isfile(file) then
		writefile(file, game:HttpGet(path))
	end

	local s = Instance.new("Sound")
	s.Name = name
	s.SoundId = (getcustomasset or getsynasset)(file)
	s.Volume = vol or 1
	s.TimePosition = tpos or 0
	s.Parent = parent or workspace
	s:Play()
	Debris:AddItem(s, 5)
	return s
end

local function RBXSFX(id, vol, par, tpos)
	local s = Instance.new("Sound")
	local str = tostring(id)
	s.Name = str:match("%d+") or "RBXSound"
	s.SoundId = str:match("rbxassetid://") and str or "rbxassetid://" .. str
	s.Volume = vol or 1
	s.TimePosition = tpos or 0
	s.Parent = par or workspace
	s:Play()
	Debris:AddItem(s, 5)
	return s
end

local TweenService = game:GetService("TweenService")
local LocalPlayer = game.Players.LocalPlayer

if not workspace:FindFirstChild("Effects") then
	local effectsFolder = Instance.new("Folder")
	effectsFolder.Name = "Effects"
	effectsFolder.Parent = workspace
end

local function BlackFlashHit(attacker, victim)
	if not attacker:FindFirstChild("HumanoidRootPart") then return end
	
	local victimHRP = victim:FindFirstChild("HumanoidRootPart")
	if not victimHRP then return end
	
	local effectPart = Instance.new("Part")
	effectPart.Name = "BlackFlashHit"
	effectPart.Anchored = true
	effectPart.CanCollide = false
	effectPart.CanQuery = false
	effectPart.CanTouch = false
	effectPart.Transparency = 1
	effectPart.Size = Vector3.new(1, 1, 1)
	effectPart.Position = victimHRP.Position
	effectPart.Parent = workspace.Effects
	Debris:AddItem(effectPart, 1)
       SFX("https://github.com/NetlessScripter/Vegeta/blob/f69548941b7da7cea3406fe52ff642e18fb1ebc8/copy_3045D33D-79BC-4E7A-AAD4-683BEC38379B.mp3?raw=true", 1.65, HRP, 0)

	local pointLight = Instance.new("PointLight", effectPart)
	pointLight.Brightness = 10
	pointLight.Color = Color3.fromRGB(255, 0, 0)
	pointLight.Range = 30
	
	local spotLight = Instance.new("SpotLight", effectPart)
	spotLight.Brightness = 15
	spotLight.Color = Color3.fromRGB(255, 0, 0)
	spotLight.Range = 50
	spotLight.Angle = 90
	spotLight.Face = Enum.NormalId.Front
	
	local att1 = Instance.new('Attachment', effectPart)
	local wind2 = Instance.new('ParticleEmitter', att1)
	wind2.Name = "Wind2"
	wind2.Brightness = 5
	wind2.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 0, 0)), ColorSequenceKeypoint.new(1, Color3.new(1, 0, 0))})
	wind2.LightEmission = 1
	wind2.LightInfluence = 0
	wind2.Orientation = Enum.ParticleOrientation.VelocityPerpendicular
	wind2.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 40, 0), NumberSequenceKeypoint.new(1, 40, 0)})
	wind2.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0, -3, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	wind2.Texture = "rbxassetid://1053548563"
	wind2.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(1, 1, 0)})
	wind2.ZOffset = 0
	wind2.EmissionDirection = Enum.NormalId.Top
	wind2.Enabled = false
	wind2.Lifetime = NumberRange.new(0.1, 0.1)
	wind2.Rate = 100
	wind2.RotSpeed = NumberRange.new(0, 0)
	wind2.Rotation = NumberRange.new(-360, 360)
	wind2.Speed = NumberRange.new(0.01, 0.01)
	wind2.SpreadAngle = Vector2.new(360, 360)
	wind2.TimeScale = 1
	wind2.Acceleration = Vector3.new(0, 0, 0)
	wind2.Drag = 0
	wind2.VelocityInheritance = 0
	wind2.WindAffectsDrag = false
	wind2.Shape = Enum.ParticleEmitterShape.Box
	wind2.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
	wind2.ShapePartial = 1
	wind2.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
	wind2.LockedToPart = false
	
	local att2 = Instance.new('Attachment', effectPart)
	local blast = Instance.new('ParticleEmitter', att2)
	blast.Name = "Blast"
	blast.Brightness = 1
	blast.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 0, 0)), ColorSequenceKeypoint.new(1, Color3.new(1, 0, 0))})
	blast.LightEmission = 1
	blast.LightInfluence = 1
	blast.Orientation = Enum.ParticleOrientation.VelocityParallel
	blast.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 10, 0), NumberSequenceKeypoint.new(1, 38.029678344726562, 0)})
	blast.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0, -3, 0), NumberSequenceKeypoint.new(1, 2.5124998092651367, 0)})
	blast.Texture = "rbxassetid://7994629137"
	blast.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	blast.ZOffset = 0
	blast.EmissionDirection = Enum.NormalId.Front
	blast.Enabled = false
	blast.Lifetime = NumberRange.new(0.1, 0.1)
	blast.Rate = 100
	blast.RotSpeed = NumberRange.new(0, 0)
	blast.Rotation = NumberRange.new(-360, 360)
	blast.Speed = NumberRange.new(0.1, 0.1)
	blast.SpreadAngle = Vector2.new(360, 360)
	blast.TimeScale = 1
	blast.Acceleration = Vector3.new(0, 0, 0)
	blast.Drag = 0
	blast.VelocityInheritance = 0
	blast.WindAffectsDrag = false
	blast.Shape = Enum.ParticleEmitterShape.Box
	blast.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
	blast.ShapePartial = 1
	blast.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
	blast.LockedToPart = false
	
	local att3 = Instance.new('Attachment', effectPart)
	local sparks = Instance.new('ParticleEmitter', att3)
	sparks.Name = "Sparks"
	sparks.Brightness = 15
	sparks.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 0, 0)), ColorSequenceKeypoint.new(1, Color3.new(1, 0, 0))})
	sparks.LightEmission = 0
	sparks.LightInfluence = 0
	sparks.Orientation = Enum.ParticleOrientation.VelocityParallel
	sparks.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 2, 1), NumberSequenceKeypoint.new(1, 0, 0)})
	sparks.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(0.3, 3, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	sparks.Texture = "rbxassetid://15407518755"
	sparks.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	sparks.ZOffset = 0
	sparks.EmissionDirection = Enum.NormalId.Front
	sparks.Enabled = false
	sparks.Lifetime = NumberRange.new(0.3, 0.45)
	sparks.Rate = 100
	sparks.RotSpeed = NumberRange.new(0, 0)
	sparks.Rotation = NumberRange.new(90, 90)
	sparks.Speed = NumberRange.new(40, 150)
	sparks.SpreadAngle = Vector2.new(360, 360)
	sparks.TimeScale = 1
	sparks.Acceleration = Vector3.new(0, 0, 0)
	sparks.Drag = 10
	sparks.VelocityInheritance = 0
	sparks.WindAffectsDrag = false
	sparks.Shape = Enum.ParticleEmitterShape.Box
	sparks.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
	sparks.ShapePartial = 1
	sparks.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
	sparks.LockedToPart = false
	
	local att4 = Instance.new('Attachment', effectPart)
	local lightning = Instance.new('ParticleEmitter', att4)
	lightning.Name = "Lightning"
	lightning.Brightness = 5
	lightning.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 0, 0)), ColorSequenceKeypoint.new(1, Color3.new(1, 0, 0))})
	lightning.LightEmission = 0
	lightning.LightInfluence = 0
	lightning.Orientation = Enum.ParticleOrientation.VelocityPerpendicular
	lightning.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(0.1, 8.66, 0), NumberSequenceKeypoint.new(0.37, 9.52, 0), NumberSequenceKeypoint.new(1, 10, 0)})
	lightning.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	lightning.Texture = "rbxassetid://14255829980"
	lightning.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	lightning.ZOffset = 2
	lightning.EmissionDirection = Enum.NormalId.Top
	lightning.Enabled = false
	lightning.Lifetime = NumberRange.new(0.2, 0.8)
	lightning.Rate = 100
	lightning.RotSpeed = NumberRange.new(0, 0)
	lightning.Rotation = NumberRange.new(0, 360)
	lightning.Speed = NumberRange.new(0.001, 10)
	lightning.SpreadAngle = Vector2.new(360, 360)
	lightning.TimeScale = 1
	lightning.Acceleration = Vector3.new(0, 0, 0)
	lightning.Drag = 3
	lightning.VelocityInheritance = 0
	lightning.WindAffectsDrag = false
	lightning.Shape = Enum.ParticleEmitterShape.Box
	lightning.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
	lightning.ShapePartial = 1
	lightning.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
	lightning.FlipbookLayout = Enum.ParticleFlipbookLayout.Grid4x4
	lightning.FlipbookMode = Enum.ParticleFlipbookMode.OneShot
	lightning.LockedToPart = true
	
	local att5 = Instance.new('Attachment', effectPart)
	local wind = Instance.new('ParticleEmitter', att5)
	wind.Name = "Wind"
	wind.Brightness = 5
	wind.Color = ColorSequence.new({ColorSequenceKeypoint.new(0, Color3.new(1, 1, 1)), ColorSequenceKeypoint.new(1, Color3.new(1, 1, 1))})
	wind.LightEmission = 0
	wind.LightInfluence = 0
	wind.Orientation = Enum.ParticleOrientation.VelocityPerpendicular
	wind.Size = NumberSequence.new({NumberSequenceKeypoint.new(0, 6.327, 0), NumberSequenceKeypoint.new(0.11, 13.74, 0), NumberSequenceKeypoint.new(0.38, 18.83, 0), NumberSequenceKeypoint.new(1, 21.82, 0)})
	wind.Squash = NumberSequence.new({NumberSequenceKeypoint.new(0, 0, 0), NumberSequenceKeypoint.new(1, 0, 0)})
	wind.Texture = "rbxassetid://7216847656"
	wind.Transparency = NumberSequence.new({NumberSequenceKeypoint.new(0, 0.85, 0), NumberSequenceKeypoint.new(1, 1, 0)})
	wind.ZOffset = 0
	wind.EmissionDirection = Enum.NormalId.Top
	wind.Enabled = false
	wind.Lifetime = NumberRange.new(0.2, 0.6)
	wind.Rate = 100
	wind.RotSpeed = NumberRange.new(750, 750)
	wind.Rotation = NumberRange.new(-360, 360)
	wind.Speed = NumberRange.new(0.01, 0.01)
	wind.SpreadAngle = Vector2.new(360, 360)
	wind.TimeScale = 1
	wind.Acceleration = Vector3.new(0, 0, 0)
	wind.Drag = 0
	wind.VelocityInheritance = 0
	wind.WindAffectsDrag = false
	wind.Shape = Enum.ParticleEmitterShape.Box
	wind.ShapeInOut = Enum.ParticleEmitterShapeInOut.Outward
	wind.ShapePartial = 1
	wind.ShapeStyle = Enum.ParticleEmitterShapeStyle.Volume
	wind.LockedToPart = true
	
	wind2:Emit(8)
	
	TweenService:Create(pointLight, TweenInfo.new(1), {
		Brightness = 0;
	}):Play()
	
	TweenService:Create(spotLight, TweenInfo.new(1), {
		Brightness = 0;
	}):Play()
	
	task.delay(0.1, function()
		blast:Emit(8)
		sparks:Emit(15)
		lightning:Emit(6)
		wind:Emit(7)
	end)
	
	if LocalPlayer.Character == attacker or LocalPlayer.Character == victim then
		local colorCorrection = Instance.new("ColorCorrectionEffect")
		colorCorrection.Name = "BlackFlashCC"
		colorCorrection.Brightness = -200
		colorCorrection.Contrast = 1000
		colorCorrection.Saturation = -1
		colorCorrection.TintColor = Color3.fromRGB(255, 0, 0)
		colorCorrection.Enabled = true
		colorCorrection.Parent = game.Lighting
		
		task.wait(0.04)
		colorCorrection.TintColor = Color3.new(1, 1, 1)
		task.wait(0.04)
		colorCorrection.Brightness = 200
		colorCorrection.Contrast = -1000
		task.wait(0.04)
		colorCorrection:Destroy()
	end
end
wait(.5)
BlackFlashHit(LocalPlayer.Character, LocalPlayer.Character)
